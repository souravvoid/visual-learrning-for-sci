<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>DNA Double Helix Lab Demo</title>
    <style>
        body {
            margin: 0;
            height: 100vh;
            background: #0f172a;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #f8fafc;
            font-family: sans-serif;
            overflow: hidden;
        }

        h2 {
            margin-bottom: 10px;
        }

        #scene {
            position: relative;
            width: 400px;
            height: 600px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.05);
            overflow: hidden;
        }

        .base {
            position: absolute;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #fff;
            font-size: 10px;
            font-weight: bold;
        }

        .pair {
            position: absolute;
            height: 2px;
            background: rgba(255, 255, 255, 0.6);
        }

        #controls {
            margin-top: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #unzip {
            width: 300px;
        }

        label {
            margin-top: 8px;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <h2>DNA Double Helix – Lab Mode</h2>
    <div id="scene"></div>
    <div id="controls">
        <input type="range" id="unzip" min="0" max="1" step="0.01" value="0">
        <label for="unzip">Unzip DNA (replication)</label>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script>
        const scene = document.querySelector('#scene');
        const unzipSlider = document.querySelector('#unzip');

        const numBases = 40;
        const helix = [];

        // Base pair rules
        const pairs = [
            { left: 'A', right: 'T', colorLeft: '#f87171', colorRight: '#60a5fa' },
            { left: 'C', right: 'G', colorLeft: '#34d399', colorRight: '#fbbf24' }
        ];

        for (let i = 0; i < numBases; i++) {
            const rule = pairs[i % 2]; // alternate A-T / C-G

            const left = document.createElement('div');
            left.className = 'base';
            left.style.background = rule.colorLeft;
            left.textContent = rule.left;
            scene.appendChild(left);

            const right = document.createElement('div');
            right.className = 'base';
            right.style.background = rule.colorRight;
            right.textContent = rule.right;
            scene.appendChild(right);

            const pair = document.createElement('div');
            pair.className = 'pair';
            scene.appendChild(pair);

            helix.push({ left, right, pair, index: i });
        }

        const width = 200;
        const height = 600;
        const amplitude = 80;
        const frequency = 0.3;

        anime({
            targets: helix,
            loop: true,
            duration: 8000,
            easing: 'linear',
            update: anim => {
                const phase = anim.progress / 100 * Math.PI * 2;
                const unzipAmount = parseFloat(unzipSlider.value); // 0 (closed) → 1 (fully unzipped)

                helix.forEach(({ left, right, pair, index }) => {
                    const y = (index / numBases) * height;
                    const angle = frequency * y + phase;
                    const offset = Math.sin(angle) * amplitude;

                    // strand separation grows as we unzip
                    const separation = width / 2 + unzipAmount * 80;

                    const xLeft = separation - offset;
                    const xRight = separation + offset;

                    left.style.transform = `translate(${xLeft}px, ${y}px)`;
                    right.style.transform = `translate(${xRight}px, ${y}px)`;

                    if (unzipAmount < 0.95) {
                        pair.style.width = Math.abs(xRight - xLeft) + 'px';
                        pair.style.transform = `translate(${Math.min(xLeft, xRight)}px, ${y + 10}px)`;
                        pair.style.opacity = 1 - unzipAmount;
                    } else {
                        pair.style.opacity = 0; // fully unzipped
                    }
                });
            }
        });
    </script>
</body>

</html>